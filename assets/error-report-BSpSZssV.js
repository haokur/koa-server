import{d as q,g,i as z,c,a as s,n as D,p as d,w as h,F as x,r as S,t,b as F,o as l,f as u,z as O,q as T,s as $,_ as A}from"./index-CmaLx7AV.js";var G={NODE_ENV:"production",title:"生产环境",baseUrl:"https://api.haokur.com",workerBaseUrl:"workers"};const n=r=>(T("data-v-2679705a"),r=r(),$(),r),J={class:"error-report"},M={class:"report-control"},P=["src"],H={class:"report-showcase mt20"},K={class:"report-showcase__wrap"},Q={class:"report-showcase__list"},W=["onClick"],X={class:"message"},Y=["href"],Z={class:"time"},ss={class:"report-showcase__detail"},es={class:"log-list"},ts={class:"log-row"},os=n(()=>s("label",{class:"label"},"报错信息：",-1)),ns={class:"content"},as={class:"log-row"},cs=n(()=>s("label",{class:"label"},"访问页面链接：",-1)),ls=["href"],rs={class:"log-row"},is=n(()=>s("label",{class:"label"},"触发时间：",-1)),_s={class:"content"},ds={class:"log-row"},hs=n(()=>s("label",{class:"label"},"来源：",-1)),us={class:"content"},ps={class:"log-row"},vs=n(()=>s("label",{class:"label"},"类型：",-1)),gs={class:"content"},fs={class:"log-row"},ms=n(()=>s("label",{class:"label"},"触发元素：",-1)),ws={class:"content"},bs={class:"log-row stack"},ks=n(()=>s("label",{class:"label"},"调用堆栈：",-1)),Cs={class:"content"},ys={class:"log-row"},Ls=n(()=>s("label",{class:"label"},"userAgent：",-1)),Is={class:"content"},Ns=q({__name:"error-report",setup(r){const p=g("");z(()=>{m()});function V(){console.log(foo)}function j(){p.value="https://abc.com/a.png"}function B(){return new Promise((i,_)=>{_("This is an unhandled rejection")})}const f=g([]),e=g(null);async function m(){const _=await(await fetch(`${G.baseUrl}/log/query`)).json();f.value=_.list.map(a=>({...a,content:JSON.parse(decodeURIComponent(a.content))}))}function R(i){e.value=i}return(i,_)=>{var w,b,k,C,y,L,I,N,E;const a=F("el-button");return l(),c("div",J,[s("div",M,[p.value?(l(),c("img",{key:0,class:"img",src:p.value},null,8,P)):D("",!0),d(a,{onClick:V},{default:h(()=>[u("window.onerror捕获")]),_:1}),d(a,{onClick:j},{default:h(()=>[u("window.addEventListener捕获")]),_:1}),d(a,{onClick:B},{default:h(()=>[u("promise-reject未处理捕获")]),_:1})]),s("div",H,[d(a,{type:"primary",onClick:m},{default:h(()=>[u("刷新日志")]),_:1}),s("div",K,[s("ul",Q,[(l(!0),c(x,null,S(f.value,(o,v)=>{var U;return l(),c("li",{class:O(["report-showcase__item",{active:o.id===((U=e.value)==null?void 0:U.id)}]),onClick:Es=>R(o),key:v},[s("h4",X,t(o.content.message),1),s("a",{class:"link",href:o.content.href},t(o.content.href),9,Y),s("div",Z,t(o.content.time),1)],10,W)}),128))]),s("div",ss,[s("div",es,[s("h3",ts,[os,s("span",ns,t((w=e.value)==null?void 0:w.content.message),1)]),s("div",as,[cs,s("a",{href:(b=e.value)==null?void 0:b.content.href},t((k=e.value)==null?void 0:k.content.href),9,ls)]),s("div",rs,[is,s("span",_s,t((C=e.value)==null?void 0:C.content.time),1)]),s("div",ds,[hs,s("span",us,t((y=e.value)==null?void 0:y.source),1)]),s("div",ps,[vs,s("span",gs,t((L=e.value)==null?void 0:L.content.type),1)]),s("div",fs,[ms,s("span",ws,t((I=e.value)==null?void 0:I.content.target_element),1)]),s("div",bs,[ks,s("div",Cs,[(l(!0),c(x,null,S((N=e.value)==null?void 0:N.content.stacks,(o,v)=>(l(),c("div",{class:"stack-item",key:v}," * "+t(o),1))),128))])]),s("div",ys,[Ls,s("span",Is,t((E=e.value)==null?void 0:E.content.user_agent),1)])])])])])])}}}),xs=A(Ns,[["__scopeId","data-v-2679705a"]]);export{xs as default};
